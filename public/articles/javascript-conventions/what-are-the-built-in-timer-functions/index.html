
<html>
<head>
  <script type="text/javascript">var _sf_startpt=(new Date()).getTime()</script>
  <link rel="stylesheet" href="/css/nodedocs.css" type="text/css" media="screen" title="no title" charset="utf-8">
  <link rel="stylesheet" href="/css/highlight/github.css" type="text/css" media="screen" title="no title" charset="utf-8">
</head>
<body>
  <header>
    <div class="link"><a href="http://github.com/nodejitsu/docs">Edit this page on GitHub</a></div>
    <div class="title">docs.nodejitsu.com</div>
  </header>

  <div id="mask"></div>
  <div id="toc"><ul><li><a href="/articles/advanced">advanced</a><ul><li><a href="/articles/advanced/buffers">buffers</a><ul><li><a href="/articles/advanced/buffers/how-to-use-buffers">how to use buffers</a></li></ul></li><li><a href="/articles/advanced/streams">streams</a><ul><li><a href="/articles/advanced/streams/how-to-use-fs-create-read-stream">how to use fs create read stream</a></li><li><a href="/articles/advanced/streams/how-to-use-fs-create-write-stream">how to use fs create write stream</a></li><li><a href="/articles/advanced/streams/how-to-use-stream-pipe">how to use stream pipe</a></li><li><a href="/articles/advanced/streams/what-are-streams">what are streams</a></li></ul></li></ul></li><li><a href="/articles/child-processes">child processes</a><ul><li><a href="/articles/child-processes/how-to-spawn-a-child-process">how to spawn a child process</a></li></ul></li><li><a href="/articles/command-line">command line</a><ul><li><a href="/articles/command-line/how-to-get-colors-on-the-command-line">how to get colors on the command line</a></li><li><a href="/articles/command-line/how-to-parse-command-line-arguments">how to parse command line arguments</a></li><li><a href="/articles/command-line/how-to-prompt-for-command-line-input">how to prompt for command line input</a></li></ul></li><li><a href="/articles/cryptography">cryptography</a><ul><li><a href="/articles/cryptography/how-to-use-crypto-module">how to use crypto module</a></li><li><a href="/articles/cryptography/how-to-use-the-tls-module">how to use the tls module</a></li></ul></li><li><a href="/articles/errors">errors</a><ul><li><a href="/articles/errors/what-are-the-error-conventions">what are the error conventions</a></li><li><a href="/articles/errors/what-is-the-error-object">what is the error object</a></li><li><a href="/articles/errors/what-is-try-catch">what is try catch</a></li></ul></li><li><a href="/articles/file-system">file system</a><ul><li><a href="/articles/file-system/how-to-read-files-in-nodejs">how to read files in nodejs</a></li><li><a href="/articles/file-system/how-to-search-files-and-directories-in-nodejs">how to search files and directories in nodejs</a></li><li><a href="/articles/file-system/how-to-store-local-config-data">how to store local config data</a></li><li><a href="/articles/file-system/how-to-use-the-path-module">how to use the path module</a></li><li><a href="/articles/file-system/how-to-write-files-in-nodejs">how to write files in nodejs</a></li></ul></li><li><a href="/articles/getting-started">getting started</a><ul><li><a href="/articles/getting-started/control-flow">control flow</a><ul><li><a href="/articles/getting-started/control-flow/how-to-write-asynchronous-code">how to write asynchronous code</a></li><li><a href="/articles/getting-started/control-flow/what-are-callbacks">what are callbacks</a></li><li><a href="/articles/getting-started/control-flow/what-are-event-emitters">what are event emitters</a></li></ul></li><li><a href="/articles/getting-started/globals-in-node-js">globals in node js</a></li><li><a href="/articles/getting-started/how-to-debug-nodejs-applications">how to debug nodejs applications</a></li><li><a href="/articles/getting-started/how-to-use-util-inspect">how to use util inspect</a></li><li><a href="/articles/getting-started/npm">npm</a><ul><li><a href="/articles/getting-started/npm/how-to-access-module-package-info">how to access module package info</a></li><li><a href="/articles/getting-started/npm/what-is-npm">what is npm</a></li><li><a href="/articles/getting-started/npm/what-is-the-file-package-json">what is the file package json</a></li></ul></li><li><a href="/articles/getting-started/the-console-module">the console module</a></li><li><a href="/articles/getting-started/the-process-module">the process module</a></li><li><a href="/articles/getting-started/what-is-require">what is require</a></li></ul></li><li><a href="/articles/HTTP">HTTP</a><ul><li><a href="/articles/HTTP/clients">clients</a><ul><li><a href="/articles/HTTP/clients/how-to-access-query-string-parameters">how to access query string parameters</a></li><li><a href="/articles/HTTP/clients/how-to-create-a-HTTP-request">how to create a HTTP request</a></li></ul></li><li><a href="/articles/HTTP/servers">servers</a><ul><li><a href="/articles/HTTP/servers/how-to-create-a-HTTP-server">how to create a HTTP server</a></li><li><a href="/articles/HTTP/servers/how-to-create-a-HTTPS-server">how to create a HTTPS server</a></li><li><a href="/articles/HTTP/servers/how-to-read-POST-data">how to read POST data</a></li><li><a href="/articles/HTTP/servers/how-to-serve-static-files">how to serve static files</a></li></ul></li></ul></li><li><a href="/articles/javascript-conventions">javascript conventions</a><ul><li><a href="/articles/javascript-conventions/how-to-create-default-parameters-for-functions">how to create default parameters for functions</a></li><li><a href="/articles/javascript-conventions/what-are-the-built-in-timer-functions">what are the built in timer functions</a></li><li><a href="/articles/javascript-conventions/what-are-truthy-and-falsy-values">what are truthy and falsy values</a></li><li><a href="/articles/javascript-conventions/what-is-json">what is json</a></li><li><a href="/articles/javascript-conventions/what-is-the-arguments-object">what is the arguments object</a></li></ul></li><li><a href="/articles/REPL">REPL</a><ul><li><a href="/articles/REPL/how-to-create-a-custom-repl">how to create a custom repl</a></li><li><a href="/articles/REPL/how-to-use-nodejs-repl">how to use nodejs repl</a></li></ul></li></ul></div>
  <div id="article">
    <div id="metadata">
      <h1 class="title">What are the built-in timer functions?</h1>
      <div class="date">Fri Aug 26 2011 03:08:50 GMT-0700 (PST)</div>
      <div class="author">nico</div>
      <div>
        
      <a href="/articles" class="breadcrumb">articles</a><a href="/articles/javascript-conventions" class="breadcrumb">javascript-conventions</a><a href="/articles/javascript-conventions/what-are-the-built-in-timer-functions" class="breadcrumb">what-are-the-built-in-timer-functions</a></div>
      <!--
        <div class="tags"></div>
        <div class="difficulty"></div>
      -->
    </div>
    <div id="content"><p>There are two built-in timer functions, <code>setTimeout</code> and <code>setInterval</code>, which can be used to call a function at a later time. For an example usage:</p>

<pre><code>setTimeout(function() { console.log(&quot;setTimeout: It's been one second!&quot;); }, 1000);
setInterval(function() { console.log(&quot;setInterval: It's been one second!&quot;); }, 1000);</code></pre>

<p>An example output is:</p>

<pre><code>setTimeout: It's been one second!
setInterval: It's been one second!
setInterval: It's been one second!
setInterval: It's been one second!
setInterval: It's been one second!
...</code></pre>

<p>As you can see the parameters to both are the same. The number second paramter says how long in milliseconds to wait before calling the function passed into the first parameter. The difference between the two functions is that <code>setTimeout</code> calls the callback only once while <code>setInterval</code> will call it over and over again.</p>

<p>Typically you want to be careful with <code>setInterval</code> because it can cause some undesireable effects.  If, for example, you wanted to make sure your server was up by pinging it every second, you might think to try something like this:</p>

<pre><code>setInterval(ping, 1000);</code></pre>

<p>This can cause problems, however, if your server is slow and it takes, say, 3 seconds to respond to the first request. In the time it takes to get back the response, you would have sent off 3 more requests - not exactly desirable!  This isn't the end of the world when serving small static files, but if you doing an expensive operation such as database query or any complicated computation this can have some undiserable results. A common solution looks like this:</p>

<pre><code><span class="keyword">var</span> recursive = <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
    console.log(&quot;It has been one second!&quot;);
    setTimeout(recursive,<span class="number">1000</span>);
}
recursive();</code></pre>

<p>As you can see, it makes a call to the <code>recursive</code> function which, as it completes, makes a call to <code>setTimeout(recursive, 1000)</code> which makes it call <code>recursive</code> again in 1 second - thus having near the same effect as setInterval while being resilient to the unintended errors that can pile up.</p>

<p>You can clear the timers you set with <code>clearTimeout</code> and <code>clearInterval</code>. Their usages are very simple:</p>

<pre><code><span class="identifier">function</span> <span class="identifier">never_call</span> () {
  <span class="identifier">console</span>.<span class="identifier">log</span>(&amp;<span class="identifier">quot</span>;<span class="constant">You</span> <span class="identifier">should</span> <span class="identifier">never</span> <span class="identifier"><span class="keymethods">call</span></span> <span class="identifier">this</span> <span class="identifier">function</span>&amp;<span class="identifier">quot</span>;);
}

<span class="identifier">var</span> <span class="identifier">id1</span> = <span class="constant">setTimeout</span>(<span class="identifier">never_call</span>,<span class="number">1000</span>);
<span class="identifier">var</span> <span class="identifier">id2</span> = <span class="constant">setInterval</span>(<span class="identifier">never_call</span>,<span class="number">1000</span>);

<span class="constant">clearTimeout</span>(<span class="identifier">id1</span>);
<span class="constant">clearInterval</span>(<span class="identifier">id2</span>);</code></pre>

<p>So if you keep track of the return values of the timers, you can easily unhook the timers. </p>

<p>The final trick for the timer objects is you can pass parameters to the callback by passing more parameters to setTimeout and setInterval:</p>

<pre><code>setTimeout(console.log, 1000, &quot;This&quot;, &quot;has&quot;, 4, &quot;parameters&quot;);
setInterval(console.log, 1000, &quot;This only has one&quot;);


This has 4 parameters
This only has one
This only has one
This only has one
This only has one
This only has one
...</code></pre></div>
  </div>
  <script type="text/javascript" charset="utf-8" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
  <script type="text/javascript" charset="utf-8" src="/js/index.js"></script>
  <script type="text/javascript">
  var _sf_async_config={uid:11119,domain:"docs.nodejitsu.com"};
  (function(){
    function loadChartbeat() {
      window._sf_endpt=(new Date()).getTime();
      var e = document.createElement('script');
      e.setAttribute('language', 'javascript');
      e.setAttribute('type', 'text/javascript');
      e.setAttribute('src',
         (("https:" == document.location.protocol) ? "https://a248.e.akamai.net/chartbeat.download.akamai.com/102508/" : "http://static.chartbeat.com/") +
         "js/chartbeat.js");
      document.body.appendChild(e);
    }
    var oldonload = window.onload;
    window.onload = (typeof window.onload != 'function') ?
       loadChartbeat : function() { oldonload(); loadChartbeat(); };
  })();
  </script>
</body>
</html>